<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FAQ | Caliban</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/caliban/caliban.png">
    <meta name="description" content="Functional GraphQL library for Scala">
    
    <link rel="preload" href="/caliban/assets/css/0.styles.5378620b.css" as="style"><link rel="preload" href="/caliban/assets/js/app.06847a1c.js" as="script"><link rel="preload" href="/caliban/assets/js/2.caf3e0bc.js" as="script"><link rel="preload" href="/caliban/assets/js/21.6563d4da.js" as="script"><link rel="prefetch" href="/caliban/assets/js/10.4a28748b.js"><link rel="prefetch" href="/caliban/assets/js/11.f3bf0108.js"><link rel="prefetch" href="/caliban/assets/js/12.3bea9ac4.js"><link rel="prefetch" href="/caliban/assets/js/13.4eb72b62.js"><link rel="prefetch" href="/caliban/assets/js/14.51224088.js"><link rel="prefetch" href="/caliban/assets/js/15.126379cb.js"><link rel="prefetch" href="/caliban/assets/js/16.9e329d2b.js"><link rel="prefetch" href="/caliban/assets/js/17.41547507.js"><link rel="prefetch" href="/caliban/assets/js/18.e3d75065.js"><link rel="prefetch" href="/caliban/assets/js/19.92035a9f.js"><link rel="prefetch" href="/caliban/assets/js/20.daa52ffd.js"><link rel="prefetch" href="/caliban/assets/js/22.724ace4d.js"><link rel="prefetch" href="/caliban/assets/js/3.cc5ee1dd.js"><link rel="prefetch" href="/caliban/assets/js/4.b5c5d85a.js"><link rel="prefetch" href="/caliban/assets/js/5.aedbb9bc.js"><link rel="prefetch" href="/caliban/assets/js/6.7dd3e1f3.js"><link rel="prefetch" href="/caliban/assets/js/7.00cd415f.js"><link rel="prefetch" href="/caliban/assets/js/8.f886d4ab.js"><link rel="prefetch" href="/caliban/assets/js/9.f82d2f99.js">
    <link rel="stylesheet" href="/caliban/assets/css/0.styles.5378620b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/caliban/" class="home-link router-link-active"><img src="/caliban/caliban.svg" alt="Caliban" class="logo"> <span class="site-name can-hide">Caliban</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/caliban/docs/" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="/caliban/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/caliban/faq/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  FAQ
</a></div><div class="nav-item"><a href="/caliban/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/ghostdogpr/caliban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://javadoc.io/doc/com.github.ghostdogpr/caliban_2.12/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scaladoc
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/caliban/docs/" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="/caliban/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/caliban/faq/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  FAQ
</a></div><div class="nav-item"><a href="/caliban/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/ghostdogpr/caliban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://javadoc.io/doc/com.github.ghostdogpr/caliban_2.12/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scaladoc
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h1> <h3 id="i-don-t-know-where-to-start-ðŸ˜¥"><a href="#i-don-t-know-where-to-start-ðŸ˜¥" class="header-anchor">#</a> I don't know where to start ðŸ˜¥</h3> <p>No worries! Head to the <a href="https://ghostdogpr.github.io/caliban/resources/" target="_blank" rel="noopener noreferrer">Resources<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> page to find a few introductory videos and blog posts. Once you're ready for more details, check the <a href="https://ghostdogpr.github.io/caliban/docs/" target="_blank" rel="noopener noreferrer">Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. If you prefer looking at some code first, check <a href="https://ghostdogpr.github.io/caliban/docs/examples.html" target="_blank" rel="noopener noreferrer">this list of examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you're still lost, just come to the <a href="https://discord.gg/EYpumuv" target="_blank" rel="noopener noreferrer">Discord channel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>!</p> <h3 id="i-m-getting-a-compilation-error-saying-a-schema-is-missing-but-i-don-t-know-which-one"><a href="#i-m-getting-a-compilation-error-saying-a-schema-is-missing-but-i-don-t-know-which-one" class="header-anchor">#</a> I'm getting a compilation error saying a <code>Schema</code> is missing, but I don't know which one.</h3> <p>Call directly <code>Schema.gen[YourType]</code> or just <code>gen[YourType]</code> if you extend <code>GenericSchema</code>. The error should be more detailed.</p> <h3 id="i-want-to-use-caliban-but-i-use-cats-effect-monix-instead-of-zio"><a href="#i-want-to-use-caliban-but-i-use-cats-effect-monix-instead-of-zio" class="header-anchor">#</a> I want to use Caliban, but I use Cats Effect / Monix instead of ZIO.</h3> <p>That's not a problem! Caliban has interop modules that &quot;hide&quot; the ZIO details and expose Cats Effect or Monix types instead. Check the <a href="https://ghostdogpr.github.io/caliban/docs/interop.html#cats-effect" target="_blank" rel="noopener noreferrer">interop docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details.</p> <h3 id="my-query-fails-with-an-effect-failure-error-how-can-i-get-more-details"><a href="#my-query-fails-with-an-effect-failure-error-how-can-i-get-more-details" class="header-anchor">#</a> My query fails with an &quot;Effect failure&quot; error. How can I get more details?</h3> <p>When an error happens in one of the resolvers, Caliban doesn't expose the inner exception to the client by default (this might be unsafe to do so), but you can easily work around this by several ways:</p> <ol><li>If you fail with a <code>CalibanError.ExecutionError</code>, it won't be wrapped by Caliban so the original message will be displayed</li> <li>Using the wrapper <code>@@ printErrors</code> will print the full error to the console</li> <li>Using <code>mapError</code> on your interpreter lets you unwrap the <code>CalibanError</code> and return your inner exception instead</li></ol> <h3 id="i-have-more-than-22-fields-in-my-query-i-can-t-create-a-case-class-for-it"><a href="#i-have-more-than-22-fields-in-my-query-i-can-t-create-a-case-class-for-it" class="header-anchor">#</a> I have more than 22 fields in my Query, I can't create a case class for it.</h3> <p>Instead of one huge case class with all your fields, you can create smaller case classes and combine <code>GraphQL</code> objects using <code>|+|</code>.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">val</span> api1 <span class="token operator">=</span> graphQL<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> api2 <span class="token operator">=</span> graphQL<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> api <span class="token operator">=</span> api1 <span class="token operator">|</span><span class="token operator">+</span><span class="token operator">|</span> api2
</code></pre></div><h3 id="how-to-deal-with-authentication-authorization"><a href="#how-to-deal-with-authentication-authorization" class="header-anchor">#</a> How to deal with authentication/authorization?</h3> <p>This is typically handled with the help of ZIO environment. You can make your field require an <code>Auth</code> service by returning a <code>ZIO[Auth, E, A]</code>. Then, in your resolver, access the <code>Auth</code> service to check you have the appropriate permissions. You can inject the authentication information using a middleware in your HTTP server library. Check <a href="https://github.com/ghostdogpr/caliban/blob/master/examples/src/main/scala/example/http4s/AuthExampleApp.scala" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for a full example using http4s.</p> <h3 id="i-have-2-case-classes-with-the-same-name-different-packages-how-to-avoid-conflicts"><a href="#i-have-2-case-classes-with-the-same-name-different-packages-how-to-avoid-conflicts" class="header-anchor">#</a> I have 2 case classes with the same name (different packages). How to avoid conflicts?</h3> <p>You can use the annotation <code>@GQLName</code> to give another name to any type or field.</p> <h3 id="the-auto-generated-schema-shows-a-field-is-nullable-but-i-want-it-non-nullable-instead"><a href="#the-auto-generated-schema-shows-a-field-is-nullable-but-i-want-it-non-nullable-instead" class="header-anchor">#</a> The auto-generated schema shows a field is nullable, but I want it non-nullable instead.</h3> <p>A GraphQL field is marked as nullable if the Scala field returns an <code>Option</code> or an effect that can fail. Change your effect to return <code>UIO</code> if you want the field to be non-nullable, and use <code>orDie</code> if you want to fail the whole query in case of error instead of returning null.</p> <h3 id="can-i-use-a-union-as-input"><a href="#can-i-use-a-union-as-input" class="header-anchor">#</a> Can I use a union as input?</h3> <p>Unfortunately, it is not supported by the GraphQL spec. See <a href="https://github.com/graphql/graphql-spec/issues/488" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/issues/488<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for discussions. An alternative can be to define your own custom scalar.</p> <h3 id="how-to-deal-with-recursive-types"><a href="#how-to-deal-with-recursive-types" class="header-anchor">#</a> How to deal with recursive types?</h3> <p>Recursive types can be a little tricky. This is not a silver bullet but usually the trick is to add an <code>implicit lazy val</code> instance of <code>Schema</code> for the type that is recursive. See <a href="https://github.com/ghostdogpr/caliban/blob/master/examples/src/main/scala/example/optimizations/NaiveTest.scala#L82" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for an example.</p> <h3 id="i-m-getting-a-method-too-large-compiler-error"><a href="#i-m-getting-a-method-too-large-compiler-error" class="header-anchor">#</a> I'm getting a &quot;Method too large&quot; compiler error.</h3> <p>When you create a GraphQL API, Caliban (using a macro powered by <a href="https://github.com/propensive/magnolia" target="_blank" rel="noopener noreferrer">Magnolia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) generates a schema for every type, everywhere it's used. If you use a lot of types, the generated code might be too large. The workaround is to define schemas for your intermediate types:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">implicit</span> <span class="token keyword">val</span> schemaMyType<span class="token operator">:</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> MyType<span class="token punctuation">]</span> <span class="token operator">=</span> Schema<span class="token punctuation">.</span>gen
</code></pre></div><p>That way, the schema for this type will be extracted to a single method and defined only once. Do it in priority with types that are re-used in a lot of places: this will reduce the amount of generated code and will speed up compilation time.</p> <h3 id="how-can-i-define-a-schema-for-a-java-enum"><a href="#how-can-i-define-a-schema-for-a-java-enum" class="header-anchor">#</a> How can I define a <code>Schema</code> for a Java enum?</h3> <p>Here's an example for Java <code>DayOfWeek</code>:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">implicit</span> <span class="token keyword">val</span> dayOfWeekSchema <span class="token operator">=</span> <span class="token keyword">new</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> DayOfWeek<span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> toType<span class="token punctuation">(</span>isInput<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> __Type <span class="token operator">=</span>
    Types<span class="token punctuation">.</span>makeEnum<span class="token punctuation">(</span>
      Some<span class="token punctuation">(</span><span class="token string">&quot;DayOfWeek&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      None<span class="token punctuation">,</span>
      DayOfWeek<span class="token punctuation">.</span>values<span class="token punctuation">.</span>toList<span class="token punctuation">.</span>map<span class="token punctuation">(</span>v <span class="token keyword">=&gt;</span> __EnumValue<span class="token punctuation">(</span>v<span class="token punctuation">.</span>name<span class="token punctuation">,</span> None<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      None
    <span class="token punctuation">)</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> resolve<span class="token punctuation">(</span>value<span class="token operator">:</span> DayOfWeek<span class="token punctuation">)</span><span class="token operator">:</span> Step<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">]</span> <span class="token operator">=</span> PureStep<span class="token punctuation">(</span>StringValue<span class="token punctuation">(</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="i-don-t-want-to-use-throwable-as-my-error-type"><a href="#i-don-t-want-to-use-throwable-as-my-error-type" class="header-anchor">#</a> I don't want to use <code>Throwable</code> as my error type</h3> <p>Caliban provides <code>Schema</code> instances for <code>ZIO</code>, <code>ZQuery</code> and <code>ZStream</code> but with the condition that the error type is a <code>Throwable</code>.
That is because the error is eventually wrapped inside Caliban <code>ExecutionError</code> and we need to know what it is.
However, you can easily define a custom <code>Schema</code> without this constraint, as long as you provide a function from your error type to <code>ExecutionError</code>.</p> <p>For example, if your error type is <code>Int</code>, you can use <code>Schema.customErrorEffectSchema</code> as follows:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">implicit</span> <span class="token keyword">def</span> customEffectSchema<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">implicit</span> s<span class="token operator">:</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> A<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> IO<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> A<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span>
  Schema<span class="token punctuation">.</span>customErrorEffectSchema<span class="token punctuation">(</span><span class="token punctuation">(</span>code<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> ExecutionError<span class="token punctuation">(</span>s<span class="token string">&quot;Error code $code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>With this implicit in scope, Caliban will know how to handle any <code>IO[Int, A]</code> effects.
Caliban will automatically fill the error path and the error location inside <code>ExecutionError</code> if an error happens during the query execution.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/caliban/assets/js/app.06847a1c.js" defer></script><script src="/caliban/assets/js/2.caf3e0bc.js" defer></script><script src="/caliban/assets/js/21.6563d4da.js" defer></script>
  </body>
</html>
