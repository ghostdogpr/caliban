<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Schemas | Caliban</title>
    <meta name="description" content="Functional GraphQL library for Scala">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/caliban/caliban.png">
    
    <link rel="preload" href="/caliban/assets/css/0.styles.86c6a350.css" as="style"><link rel="preload" href="/caliban/assets/js/app.174ba835.js" as="script"><link rel="preload" href="/caliban/assets/js/2.32604474.js" as="script"><link rel="preload" href="/caliban/assets/js/14.b8832540.js" as="script"><link rel="prefetch" href="/caliban/assets/js/10.e0dcba4a.js"><link rel="prefetch" href="/caliban/assets/js/11.413e68ce.js"><link rel="prefetch" href="/caliban/assets/js/12.98d71177.js"><link rel="prefetch" href="/caliban/assets/js/13.db1a287a.js"><link rel="prefetch" href="/caliban/assets/js/15.88028aed.js"><link rel="prefetch" href="/caliban/assets/js/16.9cf4efe4.js"><link rel="prefetch" href="/caliban/assets/js/17.1416c008.js"><link rel="prefetch" href="/caliban/assets/js/3.bd0749fa.js"><link rel="prefetch" href="/caliban/assets/js/4.e85d0862.js"><link rel="prefetch" href="/caliban/assets/js/5.b72c8d49.js"><link rel="prefetch" href="/caliban/assets/js/6.a873fead.js"><link rel="prefetch" href="/caliban/assets/js/7.1711ebfc.js"><link rel="prefetch" href="/caliban/assets/js/8.45c862b7.js"><link rel="prefetch" href="/caliban/assets/js/9.200e9e3e.js">
    <link rel="stylesheet" href="/caliban/assets/css/0.styles.86c6a350.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/caliban/" class="home-link router-link-active"><img src="/caliban/caliban.svg" alt="Caliban" class="logo"> <span class="site-name can-hide">Caliban</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/caliban/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/caliban/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/caliban/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/ghostdogpr/caliban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://javadoc.io/doc/com.github.ghostdogpr/caliban_2.12/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scaladoc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/caliban/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/caliban/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/caliban/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="https://github.com/ghostdogpr/caliban" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://javadoc.io/doc/com.github.ghostdogpr/caliban_2.12/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scaladoc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Caliban</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/caliban/docs/" class="sidebar-link">Getting Started</a></li><li><a href="/caliban/docs/schema.html" class="active sidebar-link">Schemas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#enums-unions-interfaces" class="sidebar-link">Enums, unions, interfaces</a></li><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#arguments" class="sidebar-link">Arguments</a></li><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#effects" class="sidebar-link">Effects</a></li><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#annotations" class="sidebar-link">Annotations</a></li><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#custom-types" class="sidebar-link">Custom types</a></li><li class="sidebar-sub-header"><a href="/caliban/docs/schema.html#code-generation" class="sidebar-link">Code generation</a></li></ul></li><li><a href="/caliban/docs/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/caliban/docs/optimization.html" class="sidebar-link">Query optimization</a></li><li><a href="/caliban/docs/validation.html" class="sidebar-link">Validation</a></li><li><a href="/caliban/docs/introspection.html" class="sidebar-link">Introspection</a></li><li><a href="/caliban/docs/interop.html" class="sidebar-link">Interop (Cats, Monix)</a></li><li><a href="/caliban/docs/client.html" class="sidebar-link">GraphQL Client</a></li><li><a href="/caliban/docs/examples.html" class="sidebar-link">Examples</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="schemas"><a href="#schemas" class="header-anchor">#</a> Schemas</h1> <p>A GraphQL schema will be derived automatically at compile-time (no reflection) from the types present in your resolver.
The table below shows how common Scala types are converted to GraphQL types.</p> <table><thead><tr><th>Scala Type</th> <th>GraphQL Type</th></tr></thead> <tbody><tr><td>Boolean</td> <td>Boolean</td></tr> <tr><td>Int</td> <td>Int</td></tr> <tr><td>Float</td> <td>Float</td></tr> <tr><td>Double</td> <td>Float</td></tr> <tr><td>String</td> <td>String</td></tr> <tr><td>java.util.UUID</td> <td>ID</td></tr> <tr><td>Unit</td> <td>Unit (custom scalar)</td></tr> <tr><td>Long</td> <td>Long (custom scalar)</td></tr> <tr><td>BigInt</td> <td>BigInt (custom scalar)</td></tr> <tr><td>BigDecimal</td> <td>BigDecimal (custom scalar)</td></tr> <tr><td>Case Class</td> <td>Object</td></tr> <tr><td>Sealed Trait</td> <td>Enum or Union</td></tr> <tr><td>Option[A]</td> <td>Nullable A</td></tr> <tr><td>List[A]</td> <td>List of A</td></tr> <tr><td>Set[A]</td> <td>List of A</td></tr> <tr><td>Seq[A]</td> <td>List of A</td></tr> <tr><td>Vector[A]</td> <td>List of A</td></tr> <tr><td>A =&gt; B</td> <td>A and B</td></tr> <tr><td>(A, B)</td> <td>Object with 2 fields <code>_1</code> and <code>_2</code></td></tr> <tr><td>Either[A, B]</td> <td>Object with 2 nullable fields <code>left</code> and <code>right</code></td></tr> <tr><td>Map[A, B]</td> <td>List of Object with 2 fields <code>key</code> and <code>value</code></td></tr> <tr><td>ZIO[R, Nothing, A]</td> <td>A</td></tr> <tr><td>ZIO[R, E, A]</td> <td>Nullable A</td></tr> <tr><td>Future[A]</td> <td>Nullable A</td></tr> <tr><td>ZStream[R, E, A]</td> <td>A (subscription) or List of A (query, mutation)</td></tr> <tr><td>Json (from <a href="https://github.com/circe/circe" target="_blank" rel="noopener noreferrer">Circe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</td> <td>Json (custom scalar, need <code>import caliban.interop.circe.json._</code>)</td></tr> <tr><td>Json (from <a href="https://github.com/playframework/play-json" target="_blank" rel="noopener noreferrer">play-json<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</td> <td>Json (custom scalar, need <code>import caliban.interop.play.json._</code>)</td></tr></tbody></table> <p>See the <a href="#custom-types">Custom Types</a> section to find out how to support your own types.</p> <p>If you want Caliban to support other standard types, feel free to <a href="https://github.com/ghostdogpr/caliban/issues" target="_blank" rel="noopener noreferrer">file an issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or even a PR.</p> <div class="custom-block warning"><p class="custom-block-title">Schema derivation issues</p> <p>Magnolia (the library used to derive the schema at compile-time) sometimes has some trouble generating schemas with a lot of nested types, or types reused in multiple places.
to deal with this, you can declare schemas for your case classes and sealed traits explicitly:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">implicit</span> <span class="token keyword">val</span> roleSchema      <span class="token operator">=</span> Schema<span class="token punctuation">.</span>gen<span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
<span class="token keyword">implicit</span> <span class="token keyword">val</span> characterSchema <span class="token operator">=</span> Schema<span class="token punctuation">.</span>gen<span class="token punctuation">[</span>Character<span class="token punctuation">]</span>
</code></pre></div><p>Make sure those implicits are in scope when you call <code>graphQL(...)</code>. This will make Magnolia's job easier by pre-generating schemas for those classes and re-using them when needed.
This will also improve compilation times and generate less bytecode.</p></div> <h2 id="enums-unions-interfaces"><a href="#enums-unions-interfaces" class="header-anchor">#</a> Enums, unions, interfaces</h2> <p>A sealed trait will be converted to a different GraphQL type depending on its content:</p> <ul><li>a sealed trait with only case objects will be converted to an <code>ENUM</code></li> <li>a sealed trait with only case classes will be converted to a <code>UNION</code></li></ul> <p>GraphQL does not support empty objects, so in case a sealed trait mixes case classes and case objects, a union type will be created and the case objects will have a &quot;fake&quot; field named <code>_</code> which is not queryable.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">sealed</span> <span class="token keyword">trait</span> ORIGIN
<span class="token keyword">object</span> ORIGIN <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token keyword">object</span> EARTH <span class="token keyword">extends</span> ORIGIN
  <span class="token keyword">case</span> <span class="token keyword">object</span> MARS  <span class="token keyword">extends</span> ORIGIN
  <span class="token keyword">case</span> <span class="token keyword">object</span> BELT  <span class="token keyword">extends</span> ORIGIN
<span class="token punctuation">}</span>
</code></pre></div><p>The snippet above will produce the following GraphQL type:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">enum</span> <span class="token class-name">Origin</span> <span class="token punctuation">{</span>
  <span class="token constant">BELT</span>
  <span class="token constant">EARTH</span>
  <span class="token constant">MARS</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here's an example of union:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">sealed</span> <span class="token keyword">trait</span> Role
<span class="token keyword">object</span> Role <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token keyword">class</span> Captain<span class="token punctuation">(</span>shipName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Role
  <span class="token keyword">case</span> <span class="token keyword">class</span> Engineer<span class="token punctuation">(</span>specialty<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Role
  <span class="token keyword">case</span> <span class="token keyword">object</span> Mechanic <span class="token keyword">extends</span> Role
<span class="token punctuation">}</span>
</code></pre></div><p>The snippet above will produce the following GraphQL type:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">union</span> <span class="token class-name">Role</span> <span class="token operator">=</span> Captain <span class="token operator">|</span> Engineer <span class="token operator">|</span> Mechanic

<span class="token keyword">type</span> <span class="token class-name">Captain</span> <span class="token punctuation">{</span>
  <span class="token attr-name">shipName</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Engineer</span> <span class="token punctuation">{</span>
  <span class="token attr-name">specialty</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mechanic</span> <span class="token punctuation">{</span>
  <span class="token attr-name">_</span><span class="token punctuation">:</span> Boolean<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you prefer an <code>Interface</code> instead of a <code>Union</code> type, add the <code>@GQLInterface</code> annotation to your sealed trait.
An interface will be created with all the fields that are common to the case classes extending the sealed trait.</p> <h2 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h2> <p>To declare a field that take arguments, create a dedicated case class representing the arguments and make the field a <em>function</em> from this class to the result type.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">case</span> <span class="token keyword">class</span> FilterArgs<span class="token punctuation">(</span>origin<span class="token operator">:</span> Option<span class="token punctuation">[</span>Origin<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> Queries<span class="token punctuation">(</span>characters<span class="token operator">:</span> FilterArgs <span class="token keyword">=&gt;</span> List<span class="token punctuation">[</span>Character<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>The snippet above will produce the following GraphQL type:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Queries</span> <span class="token punctuation">{</span>
  <span class="token attr-name">characters</span><span class="token punctuation">(</span><span class="token attr-name">origin</span><span class="token punctuation">:</span> Origin<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Character<span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Caliban provides auto-derivation for common types such as <code>Int</code>, <code>String</code>, <code>List</code>, <code>Option</code>, etc. but you can also support your own types by providing an implicit instance of <code>caliban.schema.ArgBuilder</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>There is no <code>ArgBuilder</code> for tuples. If you have multiple arguments, use a case class containing all of them instead of a tuple.</p></div> <h2 id="effects"><a href="#effects" class="header-anchor">#</a> Effects</h2> <p>Fields can return ZIO effects. This allows you to leverage all the features provided by ZIO: timeouts, retries, access to ZIO environment, memoizing, etc. An effect will be run every time a query requiring the corresponding field is executed.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">case</span> <span class="token keyword">class</span> Queries<span class="token punctuation">(</span>characters<span class="token operator">:</span> Task<span class="token punctuation">[</span>List<span class="token punctuation">[</span>Character<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   character<span class="token operator">:</span> CharacterName <span class="token keyword">=&gt;</span> RIO<span class="token punctuation">[</span>Console<span class="token punctuation">,</span> Character<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>If you don't use ZIO environment (<code>R</code> = <code>Any</code>), there is nothing special to do to get it working.</p> <p>If you require a ZIO environment, you will need to have the content of <code>caliban.schema.GenericSchema[R]</code> for your custom <code>R</code> in scope when you call <code>graphQL(...)</code>.</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">object</span> schema <span class="token keyword">extends</span> GenericSchema<span class="token punctuation">[</span>MyEnv<span class="token punctuation">]</span>
<span class="token keyword">import</span> schema<span class="token punctuation">.</span>_
</code></pre></div><h2 id="annotations"><a href="#annotations" class="header-anchor">#</a> Annotations</h2> <p>Caliban supports a few annotations to enrich data types:</p> <ul><li><code>@GQLName(&quot;name&quot;)</code> allows you to specify a different name for a data type or a field.</li> <li><code>@GQLInputName(&quot;name&quot;)</code> allows you to specify a different name for a data type used as an input (by default, the suffix <code>Input</code> is appended to the type name).</li> <li><code>@GQLDescription(&quot;description&quot;)</code> lets you provide a description for a data type or field. This description will be visible when your schema is introspected.</li> <li><code>@GQLDeprecated(&quot;reason&quot;)</code> allows deprecating a field or an enum value.</li> <li><code>@GQLInterface</code> to force a sealed trait generating an interface instead of a union.</li> <li><code>@GQLDirective(directive: Directive)</code> to add a directive to a field or type.</li></ul> <h2 id="custom-types"><a href="#custom-types" class="header-anchor">#</a> Custom types</h2> <p>Caliban provides auto-derivation for common types such as <code>Int</code>, <code>String</code>, <code>List</code>, <code>Option</code>, etc. but you can also support your own types by providing an implicit instance of <code>caliban.schema.Schema</code>.</p> <p>An easy way to do this is to reuse existing instances and use <code>contramap</code> to map from your type to the original type. Here's an example of creating an instance for <a href="https://github.com/fthomas/refined" target="_blank" rel="noopener noreferrer">refined<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>'s <code>NonEmptyString</code> reusing existing instance for <code>String</code>:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">caliban<span class="token punctuation">.</span>schema</span><span class="token punctuation">.</span>_
<span class="token keyword">implicit</span> <span class="token keyword">val</span> nonEmptyStringSchema<span class="token operator">:</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> NonEmptyString<span class="token punctuation">]</span> <span class="token operator">=</span> Schema<span class="token punctuation">.</span>stringSchema<span class="token punctuation">.</span>contramap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre></div><p>You can also use the <code>scalarSchema</code> helper to create your own scalar types, providing a name, an optional description, and a function from your type to a <code>ResponseValue</code>:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">caliban<span class="token punctuation">.</span>schema</span><span class="token punctuation">.</span>_
<span class="token keyword">implicit</span> <span class="token keyword">val</span> unitSchema<span class="token operator">:</span> Schema<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> <span class="token builtin">Unit</span><span class="token punctuation">]</span> <span class="token operator">=</span> scalarSchema<span class="token punctuation">(</span><span class="token string">&quot;Unit&quot;</span><span class="token punctuation">,</span> None<span class="token punctuation">,</span> _ <span class="token keyword">=&gt;</span> ObjectValue<span class="token punctuation">(</span>Nil<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>If you are using a custom type as part of the input you also have to provide an implicit instance of <code>caliban.schema.ArgBuilder</code>. For example here's how to do that for <code>java.time.LocalDate</code>:</p> <div class="language-scala extra-class"><pre class="language-scala"><code>  <span class="token keyword">implicit</span> <span class="token keyword">val</span> localDateArgBuilder<span class="token operator">:</span> ArgBuilder<span class="token punctuation">[</span>LocalDate<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> StringValue<span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span>
      Try<span class="token punctuation">(</span>LocalDate<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>fold<span class="token punctuation">(</span>ex <span class="token keyword">=&gt;</span> Left<span class="token punctuation">(</span>ExecutionError<span class="token punctuation">(</span>s<span class="token string">&quot;Can't parse $value into a LocalDate&quot;</span><span class="token punctuation">,</span> innerThrowable <span class="token operator">=</span> Some<span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Right<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> other <span class="token keyword">=&gt;</span> Left<span class="token punctuation">(</span>ExecutionError<span class="token punctuation">(</span>s<span class="token string">&quot;Can't build a LocalDate from input $other&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="code-generation"><a href="#code-generation" class="header-anchor">#</a> Code generation</h2> <p>Caliban can automatically generate Scala code from a GraphQL schema.</p> <p>In order to use this feature, add the <code>caliban-codegen</code> sbt plugin to your project and enable it.</p> <div class="language-scala extra-class"><pre class="language-scala"><code>addSbtPlugin<span class="token punctuation">(</span><span class="token string">&quot;com.github.ghostdogpr&quot;</span> <span class="token operator">%</span> <span class="token string">&quot;caliban-codegen&quot;</span> <span class="token operator">%</span> <span class="token string">&quot;0.7.4&quot;</span><span class="token punctuation">)</span>
enablePlugins<span class="token punctuation">(</span>CodegenPlugin<span class="token punctuation">)</span>
</code></pre></div><p>Then call the <code>calibanGenSchema</code> sbt command.</p> <div class="language-scala extra-class"><pre class="language-scala"><code>calibanGenSchema schemaPath outPath <span class="token operator">?</span>scalafmtPath

calibanGenSchema project<span class="token operator">/</span>schema<span class="token punctuation">.</span>graphql src<span class="token operator">/</span>main<span class="token operator">/</span>MyAPI<span class="token punctuation">.</span>scala
</code></pre></div><p>This command will create a Scala file in <code>outputPath</code> containing all the types defined in the provided GraphQL schema defined at <code>schemaPath</code>. The generated code will be formatted with Scalafmt using the configuration defined by <code>scalafmtPath</code> (default: <code>.scalafmt.conf</code>).</p> <div class="custom-block warning"><p class="custom-block-title">Unsupported features</p> <p>Some features are not supported by Caliban and will cause an error during code generation:</p> <ul><li>interfaces</li> <li>extensions</li></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/caliban/docs/" class="prev router-link-active">
        Getting Started
      </a></span> <span class="next"><a href="/caliban/docs/middleware.html">
        Middleware
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/caliban/assets/js/app.174ba835.js" defer></script><script src="/caliban/assets/js/2.32604474.js" defer></script><script src="/caliban/assets/js/14.b8832540.js" defer></script>
  </body>
</html>
